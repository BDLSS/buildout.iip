[buildout]
parts+=
	eggs-install
	apache-download
	mod-fcgi-download
	apache-fcgi-install
	httpd-conf
	fcgid-conf
	virtualhost-conf
	iipsrv-logs
	cron-script
	start-script
	install-nodejs
	nodejs-config
	install-grunt
	install-mirador

[install-nodejs]
recipe = hexagonit.recipe.cmmi
url = http://nodejs.org/dist/v0.10.35/node-v0.10.35-linux-x64.tar.gz
keep-compile-dir = false
configure-options =

[nodejs-config]
recipe = collective.recipe.cmd
on_install = true
cmds = echo '# Node Enviroment Setup' >> /home/${users:buildout-user}/.bashrc; echo 'export PATH=${buildout:directory}/parts/node/bin:$PATH' >> /home/${users:buildout-user}/.bashrc; echo 'export NODE_PATH=${buildout:directory}/parts/node/lib/node_modules' >> /home/${users:buildout-user}/.bashrc;. /home/${users:buildout-user}/.bashrc

[install-grunt]
recipe = collective.recipe.cmd
on_install = true
cmds = npm install -g grunt-cli;

[install-mirador]
recipe = collective.recipe.cmd
on_install = true
cmds = cd ${buildout:directory}/src/www; npm install;